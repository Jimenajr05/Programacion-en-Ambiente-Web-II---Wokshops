<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Crear Curso</title>

  <script>
    // Función para crear un curso
    function createCourse() {

      // Obtener datos del formulario
      const name = document.getElementById('name').value;
      const credits = document.getElementById('credits').value;
      const message = document.getElementById('message');

      // Validar campos vacíos
      if (name === '' || credits === '') {
        message.innerHTML = 'Complete todos los campos';
        return;
      }

      // Crear petición AJAX
      const ajax = new XMLHttpRequest();

      // Cuando el servidor responde
      ajax.addEventListener('load', () => {
        if (ajax.status === 201) {
          message.innerHTML = 'Curso creado correctamente';

          // Limpiar formulario
          document.getElementById('name').value = '';
          document.getElementById('credits').value = '';
        } else {
          message.innerHTML = 'Error al crear el curso';
        }
      });

      // Manejar error de conexión
      ajax.addEventListener('error', () => {
        message.innerHTML = 'Error de conexión';
      });

      // Configurar solicitud POST
      ajax.open('POST', 'http://localhost:3001/course');
      ajax.setRequestHeader('Content-Type', 'application/json');

      // Enviar datos al servidor
      ajax.send(JSON.stringify({
        name: name,
        credits: Number(credits)
      }));
    }
  </script>
</head>

<body>

<h1>Crear Curso</h1>

Nombre del curso:<br>
<input type="text" id="name"><br><br>

Créditos:<br>
<input type="number" id="credits"><br><br>

<button onclick="createCourse()">Guardar</button>
<button onclick="location.href='index.html'">Volver</button>

<p id="message"></p>

</body>
</html>